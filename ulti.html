<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Neon Multiverse Hub - Portal</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #04050f;
  --glass: rgba(255,255,255,0.08);
  --panel: rgba(255,255,255,0.05);
  --neon: #00fff7;
  --pink: #ff2ed4;
}
* { box-sizing: border-box; }
body {
  margin: 0;
  font-family: 'Inter', system-ui, sans-serif;
  background: radial-gradient(circle at 15% 20%, rgba(255,46,212,0.2), transparent 30%),
              radial-gradient(circle at 80% 0%, rgba(0,255,247,0.18), transparent 32%),
              radial-gradient(circle at 45% 75%, rgba(130,86,255,0.18), transparent 38%),
              var(--bg);
  color: #e8f7ff;
  min-height: 100vh;
  overflow-x: hidden;
}
header {
  position: sticky; top: 0; z-index: 20;
  display: flex; justify-content: space-between; align-items: center;
  padding: 14px 18px;
  background: rgba(4,5,15,0.85);
  backdrop-filter: blur(12px);
  border-bottom: 1px solid rgba(255,255,255,0.08);
  box-shadow: 0 10px 40px rgba(0,0,0,0.35);
}
h1 { margin: 0; font-family: 'Orbitron', sans-serif; letter-spacing: 1.5px; font-size: 20px; }
nav { display: flex; gap: 10px; flex-wrap: wrap; }
.button, nav button {
  background: var(--panel);
  color: #e8f7ff;
  border: 1px solid rgba(255,255,255,0.12);
  padding: 10px 14px;
  border-radius: 12px;
  cursor: pointer;
  font-weight: 700;
  letter-spacing: 0.5px;
  text-shadow: 0 0 10px rgba(0,255,255,0.35);
  transition: 0.2s ease;
}
.button:hover, nav button:hover, nav button.active {
  background: linear-gradient(135deg, rgba(0,255,255,0.2), rgba(255,46,212,0.2));
  box-shadow: 0 10px 30px rgba(0,255,255,0.25);
  transform: translateY(-2px);
}
main { padding: 18px; }
.section {
  display: none;
  background: var(--glass);
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 16px;
  padding: 16px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
  margin: 16px auto;
}
.section.active { display: block; animation: fadeIn 0.4s ease; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(6px);} to { opacity: 1; transform: none;} }
.portal-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 14px;
  margin: 14px 0;
}
.portal-card {
  background: rgba(255,255,255,0.07);
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 14px;
  padding: 14px;
  box-shadow: 0 16px 40px rgba(0,0,0,0.35), 0 0 22px rgba(0,255,255,0.2);
}
.badge { display: inline-block; padding: 4px 10px; border-radius: 999px; background: rgba(0,255,255,0.12); border: 1px solid rgba(0,255,255,0.3); font-weight: 700; color: #9cf5ff; }
.control-row { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; }
input, select, textarea {
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.12);
  color: #e8f7ff;
  padding: 10px;
  border-radius: 10px;
}
textarea { width: 100%; min-height: 240px; }
canvas { width: 100%; max-width: 900px; height: 420px; border-radius: 12px; background: radial-gradient(circle at 40% 30%, rgba(0,255,255,0.12), transparent 40%), #050612; }
.neon-card { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.08); border-radius: 12px; padding: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
</style>
</head>
<body>
<header>
  <h1>NEON MULTIVERSE HUB</h1>
  <nav id="nav"></nav>
</header>
<main>
  <div id="portal" class="section active">
    <h2>Choose Your Dimension</h2>
    <p>Use the neon portal buttons below to open a dedicated experience. Each portal loads its own tools instead of crowding one screen.</p>
    <div class="portal-grid">
      <div class="portal-card">
        <h3>Roblox API Integrations</h3>
        <p>Profile lookup, friends, groups, presence, and RAP calculator.</p>
        <button class="button" data-target="roblox">Enter Roblox Tools</button>
      </div>
      <div class="portal-card">
        <h3>Python Sandbox v6</h3>
        <p>Pyodide-powered coding pad with save/load and neon themes.</p>
        <button class="button" data-target="python">Enter Python Sandbox</button>
      </div>
      <div class="portal-card">
        <h3>AI Code Terminal</h3>
        <p>Neon faux terminal with animated replies and chaos hooks.</p>
        <button class="button" data-target="terminal">Enter AI Terminal</button>
      </div>
      <div class="portal-card">
        <h3>Chaos Simulator</h3>
        <p>Trigger meteors, tornadoes, quakes, and neon explosions.</p>
        <button class="button" data-target="chaos">Enter Chaos Simulator</button>
      </div>
      <div class="portal-card">
        <h3>Backrooms Maze (Bird's Eye)</h3>
        <p>Top-down maze with stalker AI, stamina, and an escape elevator.</p>
        <button class="button" data-target="backrooms">Enter Backrooms</button>
      </div>
    </div>
  </div>

  <div id="roblox" class="section">
    <h2>Roblox API Integrations</h2>
    <p>Enter a username to fetch live data via RoProxy. The cards will fill with real profile, friends, groups, badges, presence, and avatar info where available.</p>
    <div class="control-row">
      <input id="rbxUser" placeholder="Roblox username">
      <button class="button" id="rbxFetch">Fetch Profile</button>
      <button class="button" data-target="portal">Back to Portals</button>
    </div>
    <div id="rbxResults" class="portal-grid"></div>
  </div>

  <div id="python" class="section">
    <h2>Python Sandbox v6</h2>
    <p>Pyodide runs fully in your browser. Save and load code locally.</p>
    <div class="control-row">
      <select id="theme">
        <option value="midnight" selected>Midnight</option>
        <option value="dracula">Dracula</option>
        <option value="light">Light</option>
      </select>
      <button class="button" id="runPy">Execute</button>
      <button class="button" id="saveCode">Save</button>
      <button class="button" id="loadCode">Load</button>
      <button class="button" data-target="portal">Back to Portals</button>
    </div>
    <textarea id="pythonArea">print('Hello from Neon Pyodide!')
for i in range(3):
    print('beat', i)
</textarea>
    <pre id="pyOutput" class="neon-card" style="min-height:140px;overflow:auto;"></pre>
  </div>

  <div id="terminal" class="section">
    <h2>AI Code Terminal</h2>
    <div class="neon-card" id="terminalDisplay" style="min-height:220px;font-family:monospace;background:rgba(0,0,0,0.45);"></div>
    <input id="terminalInput" placeholder="Type command (help/hack/generate/music/wipe/chaos/admin)" style="width:100%;margin-top:8px;">
    <div style="margin-top:10px;"><button class="button" data-target="portal">Back to Portals</button></div>
  </div>

  <div id="chaos" class="section">
    <h2>Chaos Simulator</h2>
    <p>Drop disasters and watch civilians panic. Toggle speed or randomize for neon mayhem.</p>
    <div class="control-row">
      <button class="button" data-disaster="meteor">Meteor</button>
      <button class="button" data-disaster="tornado">Tornado</button>
      <button class="button" data-disaster="quake">Earthquake</button>
      <button class="button" data-disaster="explosion">Explosion</button>
      <button class="button" id="randomChaos">Random</button>
      <button class="button" id="speedToggle">Toggle Slowmo</button>
      <button class="button" id="saveGif">Save GIF</button>
      <button class="button" data-target="portal">Back to Portals</button>
    </div>
    <canvas id="chaosCanvas"></canvas>
  </div>

  <div id="backrooms" class="section">
    <h2>Backrooms Maze (Bird's Eye)</h2>
    <p>Navigate the yellow maze from above. WASD to move, Shift to sprint. Reach the neon elevator while avoiding the stalker.</p>
    <button class="button" data-target="portal">Back to Portals</button>
    <canvas id="backroomsCanvas"></canvas>
  </div>
</main>
<script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>
<script>
const sections = ['portal','roblox','python','terminal','chaos','backrooms'];
const nav = document.getElementById('nav');
sections.filter(id=>id!=='portal').forEach(id=>{
  const btn=document.createElement('button');
  btn.textContent=id.toUpperCase();
  btn.onclick=()=>showSection(id);
  nav.appendChild(btn);
});
function showSection(id){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  nav.querySelectorAll('button').forEach(b=>b.classList.toggle('active', b.textContent===id.toUpperCase()));
  if(id==='chaos') resizeChaos();
}
document.querySelectorAll('button[data-target]').forEach(btn=>btn.onclick=()=>showSection(btn.dataset.target));

// Roblox live data via RoProxy
const rbxBtn=document.getElementById('rbxFetch');
async function fetchJson(url,opts){
  const res=await fetch(url,{headers:{'Content-Type':'application/json'},...opts});
  if(!res.ok) throw new Error(`Request failed: ${res.status}`);
  return await res.json();
}
async function lookupUser(username){
  const payload={usernames:[username],excludeBannedUsers:true,excludeUsernamePrefixes:{}};
  const data=await fetchJson('https://users.roproxy.com/v1/usernames/users',{method:'POST',body:JSON.stringify(payload)});
  return data.data?.[0];
}
async function renderRoblox(){
  const wrap=document.getElementById('rbxResults');
  wrap.innerHTML='<div class="portal-card"><p>Loading...</p></div>';
  const username=document.getElementById('rbxUser').value || 'builderman';
  try{
    const user=await lookupUser(username);
    if(!user) throw new Error('User not found');
    const userId=user.id;
    const [profile,presence,friends,groups,badges,avatar]=await Promise.all([
      fetchJson(`https://users.roproxy.com/v1/users/${userId}`),
      fetchJson('https://presence.roproxy.com/v1/presence/users',{method:'POST',body:JSON.stringify({userIds:[userId]})}),
      fetchJson(`https://friends.roproxy.com/v1/users/${userId}/friends?limit=12`),
      fetchJson(`https://groups.roproxy.com/v2/users/${userId}/groups/roles`),
      fetchJson(`https://badges.roproxy.com/v1/users/${userId}/badges?limit=8`),
      fetchJson(`https://avatar.roproxy.com/v1/users/${userId}/avatar`)  // contains bodyColors + assets
    ]);
    const presenceText=presence?.userPresences?.[0]?.userPresenceType===2?'In-Game':presence?.userPresences?.[0]?.userPresenceType===1?'Online':'Offline';
    const rap = (avatar?.assets||[]).reduce((sum,a)=>sum+(a?.recentAveragePrice||0),0);
    const cards=[
      {title:'Profile',body:`<strong>${profile.displayName}</strong> (@${profile.name})<br>Created: ${new Date(profile.created).toLocaleDateString()}<br>Followers: ${profile?.followersCount??'N/A'}`},
      {title:'Presence',body:`Status: ${presenceText || 'Unknown'}`},
      {title:'Friends',body:(friends.data||[]).map(f=>f.name).slice(0,6).join(', ')||'No public friends'},
      {title:'Groups',body:(groups.data||[]).map(g=>g.group.name).slice(0,6).join(', ')||'No groups'},
      {title:'Badges',body:(badges.data||[]).map(b=>b.name).slice(0,6).join(', ')||'No badges'},
      {title:'RAP (avatar assets)',body: rap? rap.toLocaleString() : 'Unavailable'}
    ];
    wrap.innerHTML='';
    cards.forEach(c=>{
      const div=document.createElement('div');
      div.className='portal-card';
      div.innerHTML=`<h3>${c.title}</h3><p>${c.body}</p>`;
      wrap.appendChild(div);
    });
  }catch(err){
    wrap.innerHTML=`<div class="portal-card"><h3>Error</h3><p>${err.message}</p></div>`;
  }
}
rbxBtn.onclick=renderRoblox;

// AI terminal
const termDisplay=document.getElementById('terminalDisplay');
const termInput=document.getElementById('terminalInput');
function termPrint(text){
  const line=document.createElement('div');
  line.textContent=text;
  line.style.padding='4px';
  line.style.animation='fadeIn 0.3s';
  termDisplay.appendChild(line);
  termDisplay.scrollTop=termDisplay.scrollHeight;
}
termPrint('NEOTERM ready. Type help.');
termInput.addEventListener('keydown',e=>{
  if(e.key==='Enter'){
    const cmd=termInput.value.trim();
    termInput.value='';
    handleTerm(cmd);
  }
});
function handleTerm(cmd){
  termPrint('> '+cmd);
  const replies={
    help:'Commands: help, hack, generate, music, wipe, chaos, admin',
    hack:'Attempting breach...ACCESS GRANTED',
    generate:'Synthesizing code fractals...',
    music:'Playing neon beat',
    wipe:'Logs wiped',
    chaos:'Triggering random disasters',
    admin:'Secret mode unlocked!'
  };
  termPrint(replies[cmd]||'Unknown command');
  if(cmd==='chaos') addChaos(['meteor','explosion'][Math.floor(Math.random()*2)]);
}

// Python sandbox
let pyReady=false; let pyodide;
async function loadPy(){
  pyodide=await loadPyodide();
  pyReady=true;
}
loadPy();
async function runPy(){
  const output=document.getElementById('pyOutput');
  if(!pyReady){ output.textContent='Loading Pyodide...'; return; }
  const code=document.getElementById('pythonArea').value;
  try {
    pyodide.globals.set('code_to_run', code);
    const result=await pyodide.runPythonAsync(`
import sys, io
buf = io.StringIO()
_old = sys.stdout
sys.stdout = buf
try:
    exec(code_to_run)
finally:
    sys.stdout = _old
buf.getvalue()
    `);
    output.textContent=result || '(no output)';
  } catch(err){
    output.textContent=err;
  }
}
document.getElementById('runPy').onclick=runPy;
document.getElementById('saveCode').onclick=()=>localStorage.setItem('neon-code',document.getElementById('pythonArea').value);
document.getElementById('loadCode').onclick=()=>{ const v=localStorage.getItem('neon-code'); if(v) document.getElementById('pythonArea').value=v; };

document.getElementById('theme').onchange=(e)=>{
  const val=e.target.value;
  const area=document.getElementById('pythonArea');
  if(val==='light'){ area.style.background='#f7f7ff'; area.style.color='#050510'; }
  else if(val==='dracula'){ area.style.background='#1e1b2e'; area.style.color='#e8f7ff'; }
  else { area.style.background='rgba(255,255,255,0.05)'; area.style.color='#e8f7ff'; }
};

// Chaos simulator
const chaosCanvas=document.getElementById('chaosCanvas');
const cCtx=chaosCanvas.getContext('2d');
let actors=[]; let slowmo=false; let chaosEvents=[];
function resizeChaos(){
  chaosCanvas.width=chaosCanvas.clientWidth||900;
  chaosCanvas.height=420;
}
function initChaos(){
  resizeChaos();
  actors=Array.from({length:24}).map(()=>({x:Math.random()*chaosCanvas.width,y:Math.random()*chaosCanvas.height,vx:0,vy:0,panic:Math.random()}));
}
function addChaos(type){ chaosEvents.push({type,t:0,x:Math.random()*chaosCanvas.width,y:Math.random()*chaosCanvas.height}); }
function chaosLoop(){
  cCtx.fillStyle='rgba(0,0,0,0.6)';
  cCtx.fillRect(0,0,chaosCanvas.width,chaosCanvas.height);
  chaosEvents.forEach(e=>{
    e.t++;
    if(e.type==='meteor'){
      cCtx.fillStyle='#ff8800';
      cCtx.beginPath(); cCtx.arc(e.x,e.y,14,0,Math.PI*2); cCtx.fill();
      actors.forEach(a=>{ a.vx+=(a.x-e.x)*0.0007; a.vy+=(a.y-e.y)*0.0007;});
    }
    if(e.type==='tornado'){
      cCtx.strokeStyle='#0ff';
      cCtx.beginPath(); cCtx.arc(e.x,e.y,22+Math.sin(e.t/5)*12,0,Math.PI*2); cCtx.stroke();
      actors.forEach(a=>{ a.vx+=Math.sin(e.t/10)*0.3; a.vy+=Math.cos(e.t/10)*0.3; });
    }
    if(e.type==='quake'){
      if(e.t<60){
        cCtx.fillStyle='rgba(255,255,255,0.1)'; cCtx.fillRect(0,0,chaosCanvas.width,chaosCanvas.height);
        actors.forEach(a=>{ a.vx+=(Math.random()-0.5)*0.5; a.vy+=(Math.random()-0.5)*0.5;});
      }
    }
    if(e.type==='explosion'){
      cCtx.fillStyle=`rgba(255,46,212,${Math.max(0,1-e.t/40)})`;
      cCtx.beginPath(); cCtx.arc(e.x,e.y,e.t*2.4,0,Math.PI*2); cCtx.fill();
      actors.forEach(a=>{ const dx=a.x-e.x, dy=a.y-e.y; const dist=Math.hypot(dx,dy)+1; a.vx+=dx/dist*1.2; a.vy+=dy/dist*1.2; });
    }
  });
  chaosEvents=chaosEvents.filter(e=>e.t<120);
  actors.forEach(a=>{
    a.panic=Math.min(1,a.panic+chaosEvents.length*0.002);
    a.x+=a.vx*(slowmo?0.5:1);
    a.y+=a.vy*(slowmo?0.5:1);
    a.vx*=0.985; a.vy*=0.985;
    if(a.x<0||a.x>chaosCanvas.width) a.vx*=-1;
    if(a.y<0||a.y>chaosCanvas.height) a.vy*=-1;
    cCtx.fillStyle=`rgba(${180+70*a.panic},${0+30*a.panic},255,0.9)`;
    cCtx.fillRect(a.x-4,a.y-4,8,8);
  });
  requestAnimationFrame(chaosLoop);
}
document.querySelectorAll('#chaos .button[data-disaster]').forEach(btn=>btn.onclick=()=>addChaos(btn.dataset.disaster));
document.getElementById('randomChaos').onclick=()=>addChaos(['meteor','tornado','quake','explosion'][Math.floor(Math.random()*4)]);
document.getElementById('speedToggle').onclick=()=>slowmo=!slowmo;
document.getElementById('saveGif').onclick=()=>alert('GIF capture stubbed: connect a GIF encoder to record frames.');

// Backrooms top-down
const backCanvas=document.getElementById('backroomsCanvas');
const bCtx=backCanvas.getContext('2d');
let maze=[], player={x:1,y:1,stamina:100}, stalker={x:5,y:5};
const cell=26;
function generateMaze(){
  const w=23,h=23; maze=[...Array(h)].map(()=>Array(w).fill(1));
  function carve(x,y){
    const dirs=[[1,0],[-1,0],[0,1],[0,-1]].sort(()=>Math.random()-0.5);
    maze[y][x]=0;
    dirs.forEach(([dx,dy])=>{
      const nx=x+dx*2, ny=y+dy*2;
      if(nx>0&&ny>0&&nx<w-1&&ny<h-1&&maze[ny][nx]===1){
        maze[y+dy][x+dx]=0; carve(nx,ny);
      }
    });
  }
  carve(1,1); player={x:1,y:1,stamina:100}; stalker={x:w-2,y:h-2};
  backCanvas.width=w*cell; backCanvas.height=h*cell;
}
const keys={};
document.addEventListener('keydown',e=>{ keys[e.code]=true; });
document.addEventListener('keyup',e=>{ keys[e.code]=false; });
function backroomsLoop(){
  bCtx.fillStyle='rgba(255,255,120,0.05)';
  bCtx.fillRect(0,0,backCanvas.width,backCanvas.height);
  for(let y=0;y<maze.length;y++) for(let x=0;x<maze[0].length;x++){
    if(maze[y][x]===1){
      bCtx.fillStyle='rgba(255,255,0,0.18)';
      bCtx.fillRect(x*cell,y*cell,cell,cell);
    }
  }
  const sprinting=keys['ShiftLeft']||keys['ShiftRight'];
  const speed=sprinting&&player.stamina>0?0.08:0.04;
  if(sprinting) player.stamina=Math.max(0,player.stamina-0.2); else player.stamina=Math.min(100,player.stamina+0.1);
  const dx=(keys['KeyD']?1:0)-(keys['KeyA']?1:0);
  const dy=(keys['KeyS']?1:0)-(keys['KeyW']?1:0);
  const nx=player.x+dx*speed*60, ny=player.y+dy*speed*60;
  if(maze[Math.round(ny)]?.[Math.round(nx)]===0){ player.x=nx; player.y=ny; }
  stalker.x+=(player.x-stalker.x)*0.003; stalker.y+=(player.y-stalker.y)*0.003;
  bCtx.fillStyle='rgba(255,0,0,0.8)'; bCtx.fillRect(stalker.x*cell, stalker.y*cell, cell, cell);
  bCtx.fillStyle='rgba(255,255,255,0.9)'; bCtx.fillRect(player.x*cell, player.y*cell, cell, cell);
  bCtx.fillStyle='#0ff'; bCtx.fillRect((maze[0].length-2)*cell,(maze.length-2)*cell,cell,cell);
  if(Math.abs(player.x-(maze[0].length-2))<0.5 && Math.abs(player.y-(maze.length-2))<0.5){ generateMaze(); }
  if(Math.hypot(player.x-stalker.x, player.y-stalker.y)<1){ player.x=1; player.y=1; }
  requestAnimationFrame(backroomsLoop);
}

// Init
generateMaze();
initChaos(); chaosLoop(); backroomsLoop();
showSection('portal');
window.addEventListener('resize',resizeChaos);
</script>
</body>
</html>
